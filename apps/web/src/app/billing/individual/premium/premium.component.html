<div class="tw-max-w-4xl tw-mx-auto">
  <bit-section *ngIf="shouldShowNewDesign$ | async">
    <div class="tw-max-w-4xl tw-ml-auto tw-mr-16 tw-text-center">
      <div
        class="tw-inline-block tw-bg-background-alt tw-border-[0.5px] tw-border-secondary-700 tw-rounded-full tw-px-2 tw-py-1 tw-mt-8 tw-mb-6"
      >
        <span bitTypography="helper" class="tw-text-secondary-700">
          You have the Bitwarden Free plan
        </span>
      </div>

      <h2 *ngIf="!isSelfHost" class="tw-mt-6 tw-text-4xl">Upgrade for complete security</h2>
      <p class="tw-text-muted tw-mb-6">
        Unlock more security features with Premium, or start sharing items with Families
      </p>
    </div>

    <!-- Two-Card Layout -->
    <div class="tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-gap-6 tw-mt-6 tw-justify-center">
      <!-- Premium Card -->
      <div>
        @if (premiumCardData$ | async; as premiumData) {
          <billing-pricing-card
            [tagline]="'Complete online security'"
            [price]="{ amount: premiumData.price, cadence: 'monthly' }"
            [button]="{ type: 'primary', text: 'Upgrade to Premium' }"
            [features]="premiumData.features"
            (buttonClick)="openUpgradeDialog('Premium')"
          >
            <h3 slot="title" bitTypography="h3" class="tw-m-0">Premium</h3>
          </billing-pricing-card>
        }
      </div>

      <!-- Families Card -->
      <div>
        @if (familiesCardData$ | async; as familiesData) {
          <billing-pricing-card
            [tagline]="'Premium security for your family'"
            [price]="{ amount: familiesData.price, cadence: 'monthly' }"
            [button]="{ type: 'secondary', text: 'Upgrade to Families' }"
            [features]="familiesData.features"
            (buttonClick)="openUpgradeDialog('Families')"
          >
            <h3 slot="title" bitTypography="h3" class="tw-m-0">Families</h3>
          </billing-pricing-card>
        }
      </div>
    </div>

    <!-- Business Plans Link -->
    <div class="tw-text-center tw-mt-6">
      <p class="tw-text-muted tw-mb-2">Prices exclude tax and are billed annually</p>
      <a
        bitLink
        linkType="primary"
        href="https://bitwarden.com/pricing/business/"
        target="_blank"
        rel="noopener noreferrer"
      >
        View business plans <i class="bwi bwi-external-link tw-ml-1" aria-hidden="true"></i>
      </a>
    </div>
  </bit-section>

  <!-- Legacy Design (shown when user already has premium access) -->
  <bit-section *ngIf="!(shouldShowNewDesign$ | async)">
    <h2 *ngIf="!isSelfHost" bitTypography="h2">{{ "goPremium" | i18n }}</h2>
    <bit-callout
      type="info"
      *ngIf="hasPremiumFromAnyOrganization$ | async"
      title="{{ 'youHavePremiumAccess' | i18n }}"
      icon="bwi bwi-star-f"
    >
      {{ "alreadyPremiumFromOrg" | i18n }}
    </bit-callout>
    <bit-callout type="success">
      <p>{{ "premiumUpgradeUnlockFeatures" | i18n }}</p>
      <ul class="bwi-ul">
        <li>
          <i class="bwi bwi-check tw-text-success bwi-li" aria-hidden="true"></i>
          {{ "premiumSignUpStorage" | i18n }}
        </li>
        <li>
          <i class="bwi bwi-check tw-text-success bwi-li" aria-hidden="true"></i>
          {{ "premiumSignUpTwoStepOptions" | i18n }}
        </li>
        <li>
          <i class="bwi bwi-check tw-text-success bwi-li" aria-hidden="true"></i>
          {{ "premiumSignUpEmergency" | i18n }}
        </li>
        <li>
          <i class="bwi bwi-check tw-text-success bwi-li" aria-hidden="true"></i>
          {{ "premiumSignUpReports" | i18n }}
        </li>
        <li>
          <i class="bwi bwi-check tw-text-success bwi-li" aria-hidden="true"></i>
          {{ "premiumSignUpTotp" | i18n }}
        </li>
        <li>
          <i class="bwi bwi-check tw-text-success bwi-li" aria-hidden="true"></i>
          {{ "premiumSignUpSupport" | i18n }}
        </li>
        <li>
          <i class="bwi bwi-check tw-text-success bwi-li" aria-hidden="true"></i>
          {{ "premiumSignUpFuture" | i18n }}
        </li>
      </ul>
      <p bitTypography="body1" [ngClass]="{ 'tw-mb-0': !isSelfHost }">
        {{
          "premiumPriceWithFamilyPlan"
            | i18n
              : (((getPremiumPrice() | async) || 0) * 12 | currency: "$")
              : familyPlanMaxUserCount
        }}
        <a
          bitLink
          linkType="primary"
          routerLink="/create-organization"
          [queryParams]="{ plan: 'families' }"
        >
          {{ "bitwardenFamiliesPlan" | i18n }}
        </a>
      </p>
      <a
        bitButton
        href="{{ premiumURL }}"
        target="_blank"
        rel="noreferrer"
        buttonType="secondary"
        *ngIf="isSelfHost"
      >
        {{ "purchasePremium" | i18n }}
      </a>
    </bit-callout>
  </bit-section>
  <bit-section *ngIf="isSelfHost">
    <individual-self-hosting-license-uploader
      (onLicenseFileUploaded)="onLicenseFileSelectedChanged()"
    />
  </bit-section>
</div>
